<html>
<head>
    <meta charset="utf-8" />
    <script src="wasm_exec.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.min.js"></script>
    <!-- Init the style sheet -->
    <link ref="stylesheet" href="styles.css" />
    <!-- Init the WASM module -->
    <script src="scripts.js"></script>
</head>

<body>
  <div id="encryption-and-decryption">
      <div>
      <div class="spinner center" v-if="loader">
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
          <div class="spinner-blade"></div>
      </div>
        <div v-if="!loginData">  
            <form @submit.prevent>
                <div class="container">
                    <h1>Register</h1>
                    <p>Please fill in this form to create an account.</p>
                    <hr>
                    <label for="email"><b>Email</b></label>
                    <input type="text" v-model="email" placeholder="Enter Email" required value="javohir@gmail.com">
                    <label for="psw"><b>Password</b></label>
                    <input type="password" v-model="password" placeholder="Enter Password" required value="1234">
                    <label for="psw-repeat"><b>Repeat Password</b></label>
                    <input type="password" v-model="confirm_password" placeholder="Repeat Password" required value="1234">
                    <hr>
                    <p>By creating an account you agree to our <a href="#">Terms & Privacy</a>.</p>
                    <button @click="registerFunc" class="registerbtn">Register</button><br />
                    </div>
                    <div class="container signin">
                    <p >Already have an account? <a v-on:click="loginData = !loginData">Sign in</a>.</p>
                </div>
            </form>
        </div>
        <div v-if="loginData">
            <form @submit.prevent="loginFunc()">
                <div class="container">
                    <h1>Login</h1>
                    <p>Please fill in this form to log in an account.</p>
                    <hr>
                    <label for="email"><b>Email</b></label>
                    <input type="text" placeholder="Enter Email" name="email" id="email" required>
                    <label for="psw"><b>Password</b></label>
                    <input type="password" placeholder="Enter Password" name="psw" id="psw" required>
                    <hr>
                    <button type="submit" class="registerbtn">Login</button>
                    </div>
                    <div class="container signin">
                    <p >Not have an account? <a v-on:click="loginData = !loginData">Sign up</a>.</p>
                </div>
            </form>
        </div>
    </div>
  </div>
</body>
<footer>
</footer>
<script>
  // Make it a Vue SPA
  new Vue({
    el: "#encryption-and-decryption",
    data: {
      message: "",
      message_b: "",
      signatureASN1_b64: "",
      signatureASN1_b64_b: "",
      comingData: [
        {
          id: 0,
          message: ''
        },
      ],
      loginData: false,
      email: "javohir@gmail.com",
      password: "1234",
      confirm_password: "1234",
      loader: false
    },
    methods: {
      signMessage: async function (){
        const result = await window.signString(this.message)
        this.pushArray(result)
        this.message = ''
      },
      async registerFunc() {
        this.loader = true
        if(this.password === this.confirm_password) {
          const result = await window.registerFunc(this.email, this.password)
          if (result == 'Registration successful') {
            this.loader = false
            this.loginData = true
          } else {
            this.loader = false
          }
        } else {
          return
        }
      }
    },
  });
</script> 
</html>
